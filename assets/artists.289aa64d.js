import{_ as e,P as a,r as s,z as t,j as u,M as r,N as l,O as i,U as n,W as o,Q as v,ax as d,X as y,Y as c,$ as p,a9 as m,bL as f,R as g,S as k,bn as h,aw as _}from"./index.2d658157.js";import{g as q}from"./artist.2ff9ca04.js";import{A as b}from"./ArtistLists.9ff480b6.js";import"./Grid.cc39c44f.js";import"./Skeleton.2e7bf840.js";import"./use-houdini.7148f755.js";const j={class:"artists"},C={class:"menu"},R=e({__name:"artists",setup(e){const R=a(),S=[{key:"-1",value:"热门"},...Array.from({length:26},((e,a)=>String.fromCharCode(a+65))).map((e=>({key:e,value:e}))),{key:"0",value:"#"}],z=s(R.currentRoute.value.query.initial?R.currentRoute.value.query.initial:S[0].key),N=["全部","华语","华语男","华语女","华语组合","欧美","欧美男","欧美女","欧美组合","日本","日本男","日本女","日本组合","韩国","韩国男","韩国女","韩国组合","其他"],$=[-1,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1],x=[-1,7,7,7,7,96,96,96,96,8,8,8,8,16,16,16,16,0],A=s(R.currentRoute.value.query.type?Number(R.currentRoute.value.query.type):0),w=s([]),D=s(0),L=s(!0),U=s(!1),E=(e=-1,a=-1,s=30,t=0,u=-1)=>{q(e,a,s,t,u).then((e=>{e.artists[0]?(e.more?L.value=!0:L.value=!1,U.value=!1,e.artists.forEach((e=>{w.value.push({id:e.id,name:e.name,cover:e.img1v1Url,size:e.musicSize})}))):(L.value=!1,$message.error("歌手内容为空"))}))},G=()=>{U.value=!0,D.value+=30,D.value>=300&&$message.info("太多了吧 😲"),E($[A.value],x[A.value],30,D.value,z.value)};return t((()=>R.currentRoute.value),(e=>{A.value=Number(e.query.type?e.query.type:0),z.value=e.query.initial?e.query.initial:S[0].key,D.value=0,"dsc-artists"==e.name&&(w.value=[],E($[A.value],x[A.value],30,0,z.value))})),u((()=>{$setSiteTitle("发现 - 歌手"),E($[A.value],x[A.value],30,0,z.value)})),(e,a)=>{const s=h,t=d,u=_;return r(),l("div",j,[i("div",C,[n(t,{class:"initial"},{default:o((()=>[(r(),l(y,null,c(S,(e=>n(s,{class:"tag",round:"",key:e,bordered:!1,type:e.key==v(z)?"primary":"default",onClick:a=>{return s=e.key,w.value=[],void R.push({path:"/discover/artists",query:{type:A.value,initial:s,page:1}});var s}},{default:o((()=>[p(m(e.value),1)])),_:2},1032,["type","onClick"]))),64))])),_:1}),n(t,{class:"category"},{default:o((()=>[(r(),l(y,null,c(N,((e,a)=>n(s,{class:f(["tag",e.length>2?"hidden":"show"]),round:"",key:e,bordered:!1,type:a==v(A)?"primary":"default",onClick:e=>(e=>{w.value=[],R.push({path:"/discover/artists",query:{type:e,initial:z.value,page:1}})})(a)},{default:o((()=>[p(m(e),1)])),_:2},1032,["class","type","onClick"]))),64))])),_:1})]),n(b,{listData:v(w),loadingNum:30},null,8,["listData"]),n(t,{justify:"center"},{default:o((()=>[v(L)?(r(),g(u,{key:0,class:"more",size:"large",strong:"",secondary:"",round:"",loading:v(U),onClick:G},{default:o((()=>[p(" 加载更多 ")])),_:1},8,["loading"])):k("",!0)])),_:1})])}}},[["__scopeId","data-v-e5374759"]]);export{R as default};
