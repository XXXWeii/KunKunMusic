import{d as e,M as t,N as r,O as n,r as a,y as o,h as i,j as s,_ as l,P as u,a5 as c,a4 as h,ag as d,k as f,af as v,U as g,W as m,cw as p,cx as w,cy as E,Q as M,R as y,a9 as C,$ as R,a7 as A,a8 as N,cz as _,cA as P,cB as I,bK as S,av as b,aw as k}from"./index.2d658157.js";import{f as z}from"./formRules.1ad773f3.js";import{a as O,b as L}from"./Tabs.aeef60ff.js";import{a as x,_ as B}from"./InputNumber.6e3256f5.js";import{_ as T,a as H}from"./FormItem.8e86c8fa.js";import{_ as D}from"./Skeleton.2e7bf840.js";import"./Add.4fe37192.js";import"./use-houdini.7148f755.js";const F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},U=[n("path",{d:"M3 17h18c.55 0 1 .45 1 1s-.45 1-1 1H3c-.55 0-1-.45-1-1s.45-1 1-1zm-.5-4.43c.36.21.82.08 1.03-.28l.47-.82l.48.83c.21.36.67.48 1.03.28c.36-.21.48-.66.28-1.02l-.49-.84h.95c.41 0 .75-.34.75-.75s-.34-.75-.75-.75H5.3l.47-.82c.21-.36.09-.82-.27-1.03a.764.764 0 0 0-1.03.28L4 8.47l-.47-.82a.764.764 0 0 0-1.03-.28c-.36.21-.48.67-.27 1.03l.47.82h-.95c-.41 0-.75.34-.75.75s.34.75.75.75h.95l-.48.83c-.2.36-.08.82.28 1.02zm8 0c.36.21.82.08 1.03-.28l.47-.82l.48.83c.21.36.67.48 1.03.28c.36-.21.48-.66.28-1.02l-.48-.83h.95c.41 0 .75-.34.75-.75s-.34-.75-.75-.75h-.96l.47-.82a.76.76 0 0 0-.27-1.03a.746.746 0 0 0-1.02.27l-.48.82l-.47-.82a.742.742 0 0 0-1.02-.27c-.36.21-.48.67-.27 1.03l.47.82h-.96a.74.74 0 0 0-.75.74c0 .41.34.75.75.75h.95l-.48.83c-.2.36-.08.82.28 1.02zM23 9.97c0-.41-.34-.75-.75-.75h-.95l.47-.82a.76.76 0 0 0-.27-1.03a.746.746 0 0 0-1.02.27l-.48.83l-.47-.82a.742.742 0 0 0-1.02-.27c-.36.21-.48.67-.27 1.03l.47.82h-.95a.743.743 0 0 0-.76.74c0 .41.34.75.75.75h.95l-.48.83a.74.74 0 0 0 .28 1.02c.36.21.82.08 1.03-.28l.47-.82l.48.83c.21.36.67.48 1.03.28c.36-.21.48-.66.28-1.02l-.48-.83h.95c.4-.01.74-.35.74-.76z",fill:"currentColor"},null,-1)],Q=e({name:"PasswordRound",render:function(e,n){return t(),r("svg",F,U)}}),$={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},V=[n("path",{d:"M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3zm-2.5 20h-3c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h3c.28 0 .5.22.5.5s-.22.5-.5.5zm3.5-3H7V4h10v14z",fill:"currentColor"},null,-1)],Y=e({name:"PhoneAndroidRound",render:function(e,n){return t(),r("svg",$,V)}});
/*!
 * qrcode.vue v3.4.0
 * A Vue.js component to generate QRCode.
 * © 2017-2023 @scopewu(https://github.com/scopewu)
 * MIT License.
 */
var j,K,X,G,q=function(){return q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},q.apply(this,arguments)};!function(e){var t=function(){function t(e,r,n,o){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;for(var i=[],s=0;s<this.size;s++)i.push(!1);for(s=0;s<this.size;s++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();var l=this.addEccAndInterleave(n);if(this.drawCodewords(l),-1==o){var u=1e9;for(s=0;s<8;s++){this.applyMask(s),this.drawFormatBits(s);var c=this.getPenaltyScore();c<u&&(o=s,u=c),this.applyMask(s)}}a(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}return t.encodeText=function(r,n){var a=e.QrSegment.makeSegments(r);return t.encodeSegments(a,n)},t.encodeBinary=function(r,n){var a=e.QrSegment.makeBytes(r);return t.encodeSegments([a],n)},t.encodeSegments=function(e,n,i,s,l,u){if(void 0===i&&(i=1),void 0===s&&(s=40),void 0===l&&(l=-1),void 0===u&&(u=!0),!(t.MIN_VERSION<=i&&i<=s&&s<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");var c,h;for(c=i;;c++){var d=8*t.getNumDataCodewords(c,n),f=o.getTotalBits(e,c);if(f<=d){h=f;break}if(c>=s)throw new RangeError("Data too long")}for(var v=0,g=[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH];v<g.length;v++){var m=g[v];u&&h<=8*t.getNumDataCodewords(c,m)&&(n=m)}for(var p=[],w=0,E=e;w<E.length;w++){var M=E[w];r(M.mode.modeBits,4,p),r(M.numChars,M.mode.numCharCountBits(c),p);for(var y=0,C=M.getData();y<C.length;y++){var R=C[y];p.push(R)}}a(p.length==h);var A=8*t.getNumDataCodewords(c,n);a(p.length<=A),r(0,Math.min(4,A-p.length),p),r(0,(8-p.length%8)%8,p),a(p.length%8==0);for(var N=236;p.length<A;N^=253)r(N,8,p);for(var _=[];8*_.length<p.length;)_.push(0);return p.forEach((function(e,t){return _[t>>>3]|=e<<7-(7&t)})),new t(c,n,_,l)},t.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},t.prototype.getModules=function(){return this.modules},t.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);var t=this.getAlignmentPatternPositions(),r=t.length;for(e=0;e<r;e++)for(var n=0;n<r;n++)0==e&&0==n||0==e&&n==r-1||e==r-1&&0==n||this.drawAlignmentPattern(t[e],t[n]);this.drawFormatBits(0),this.drawVersion()},t.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,r=t,o=0;o<10;o++)r=r<<1^1335*(r>>>9);var i=21522^(t<<10|r);a(i>>>15==0);for(o=0;o<=5;o++)this.setFunctionModule(8,o,n(i,o));this.setFunctionModule(8,7,n(i,6)),this.setFunctionModule(8,8,n(i,7)),this.setFunctionModule(7,8,n(i,8));for(o=9;o<15;o++)this.setFunctionModule(14-o,8,n(i,o));for(o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,n(i,o));for(o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,n(i,o));this.setFunctionModule(8,this.size-8,!0)},t.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var r=this.version<<12|e;a(r>>>18==0);for(t=0;t<18;t++){var o=n(r,t),i=this.size-11+t%3,s=Math.floor(t/3);this.setFunctionModule(i,s,o),this.setFunctionModule(s,i,o)}}},t.prototype.drawFinderPattern=function(e,t){for(var r=-4;r<=4;r++)for(var n=-4;n<=4;n++){var a=Math.max(Math.abs(n),Math.abs(r)),o=e+n,i=t+r;0<=o&&o<this.size&&0<=i&&i<this.size&&this.setFunctionModule(o,i,2!=a&&4!=a)}},t.prototype.drawAlignmentPattern=function(e,t){for(var r=-2;r<=2;r++)for(var n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))},t.prototype.setFunctionModule=function(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0},t.prototype.addEccAndInterleave=function(e){var r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw new RangeError("Invalid argument");for(var o=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],i=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],s=Math.floor(t.getNumRawDataModules(r)/8),l=o-s%o,u=Math.floor(s/o),c=[],h=t.reedSolomonComputeDivisor(i),d=0,f=0;d<o;d++){var v=e.slice(f,f+u-i+(d<l?0:1));f+=v.length;var g=t.reedSolomonComputeRemainder(v,h);d<l&&v.push(0),c.push(v.concat(g))}var m=[],p=function(e){c.forEach((function(t,r){(e!=u-i||r>=l)&&m.push(t[e])}))};for(d=0;d<c[0].length;d++)p(d);return a(m.length==s),m},t.prototype.drawCodewords=function(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var r=0,o=this.size-1;o>=1;o-=2){6==o&&(o=5);for(var i=0;i<this.size;i++)for(var s=0;s<2;s++){var l=o-s,u=0==(o+1&2)?this.size-1-i:i;!this.isFunction[u][l]&&r<8*e.length&&(this.modules[u][l]=n(e[r>>>3],7-(7&r)),r++)}}a(r==8*e.length)},t.prototype.applyMask=function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var r=0;r<this.size;r++){var n=void 0;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}},t.prototype.getPenaltyScore=function(){for(var e=0,r=0;r<this.size;r++){for(var n=!1,o=0,i=[0,0,0,0,0,0,0],s=0;s<this.size;s++)this.modules[r][s]==n?5==++o?e+=t.PENALTY_N1:o>5&&e++:(this.finderPenaltyAddHistory(o,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[r][s],o=1);e+=this.finderPenaltyTerminateAndCount(n,o,i)*t.PENALTY_N3}for(s=0;s<this.size;s++){n=!1;var l=0;for(i=[0,0,0,0,0,0,0],r=0;r<this.size;r++)this.modules[r][s]==n?5==++l?e+=t.PENALTY_N1:l>5&&e++:(this.finderPenaltyAddHistory(l,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[r][s],l=1);e+=this.finderPenaltyTerminateAndCount(n,l,i)*t.PENALTY_N3}for(r=0;r<this.size-1;r++)for(s=0;s<this.size-1;s++){var u=this.modules[r][s];u==this.modules[r][s+1]&&u==this.modules[r+1][s]&&u==this.modules[r+1][s+1]&&(e+=t.PENALTY_N2)}for(var c=0,h=0,d=this.modules;h<d.length;h++){c=d[h].reduce((function(e,t){return e+(t?1:0)}),c)}var f=this.size*this.size,v=Math.ceil(Math.abs(20*c-10*f)/f)-1;return a(0<=v&&v<=9),a(0<=(e+=v*t.PENALTY_N4)&&e<=2568888),e},t.prototype.getAlignmentPatternPositions=function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),r=[6],n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r},t.getNumRawDataModules=function(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");var r=(16*e+128)*e+64;if(e>=2){var n=Math.floor(e/7)+2;r-=(25*n-10)*n-55,e>=7&&(r-=36)}return a(208<=r&&r<=29648),r},t.getNumDataCodewords=function(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]},t.reedSolomonComputeDivisor=function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var r=[],n=0;n<e-1;n++)r.push(0);r.push(1);var a=1;for(n=0;n<e;n++){for(var o=0;o<r.length;o++)r[o]=t.reedSolomonMultiply(r[o],a),o+1<r.length&&(r[o]^=r[o+1]);a=t.reedSolomonMultiply(a,2)}return r},t.reedSolomonComputeRemainder=function(e,r){for(var n=r.map((function(e){return 0})),a=function(e){var a=e^n.shift();n.push(0),r.forEach((function(e,r){return n[r]^=t.reedSolomonMultiply(e,a)}))},o=0,i=e;o<i.length;o++){a(i[o])}return n},t.reedSolomonMultiply=function(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");for(var r=0,n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(t>>>n&1)*e;return a(r>>>8==0),r},t.prototype.finderPenaltyCountPatterns=function(e){var t=e[1];a(t<=3*this.size);var r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)},t.prototype.finderPenaltyTerminateAndCount=function(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)},t.prototype.finderPenaltyAddHistory=function(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)},t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t}();function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(var n=t-1;n>=0;n--)r.push(e>>>n&1)}function n(e,t){return 0!=(e>>>t&1)}function a(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;var o=function(){function e(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}return e.makeBytes=function(t){for(var n=[],a=0,o=t;a<o.length;a++){r(o[a],8,n)}return new e(e.Mode.BYTE,t.length,n)},e.makeNumeric=function(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");for(var n=[],a=0;a<t.length;){var o=Math.min(t.length-a,3);r(parseInt(t.substring(a,a+o),10),3*o+1,n),a+=o}return new e(e.Mode.NUMERIC,t.length,n)},e.makeAlphanumeric=function(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");var n,a=[];for(n=0;n+2<=t.length;n+=2){var o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));r(o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),11,a)}return n<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,a),new e(e.Mode.ALPHANUMERIC,t.length,a)},e.makeSegments=function(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]},e.makeEci=function(t){var n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)r(t,8,n);else if(t<16384)r(2,2,n),r(t,14,n);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");r(6,3,n),r(t,21,n)}return new e(e.Mode.ECI,0,n)},e.isNumeric=function(t){return e.NUMERIC_REGEX.test(t)},e.isAlphanumeric=function(t){return e.ALPHANUMERIC_REGEX.test(t)},e.prototype.getData=function(){return this.bitData.slice()},e.getTotalBits=function(e,t){for(var r=0,n=0,a=e;n<a.length;n++){var o=a[n],i=o.mode.numCharCountBits(t);if(o.numChars>=1<<i)return 1/0;r+=4+i+o.bitData.length}return r},e.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substring(r+1,r+3),16)),r+=2);return t},e.NUMERIC_REGEX=/^[0-9]*$/,e.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,e.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e}();e.QrSegment=o}(j||(j={})),K=j||(j={}),X=K.QrCode||(K.QrCode={}),G=function(){function e(e,t){this.ordinal=e,this.formatBits=t}return e.LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),e}(),X.Ecc=G,function(e){var t,r;t=e.QrSegment||(e.QrSegment={}),r=function(){function e(e,t){this.modeBits=e,this.numBitsCharCount=t}return e.prototype.numCharCountBits=function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]},e.NUMERIC=new e(1,[10,12,14]),e.ALPHANUMERIC=new e(2,[9,11,13]),e.BYTE=new e(4,[8,16,16]),e.KANJI=new e(8,[8,10,12]),e.ECI=new e(7,[0,0,0]),e}(),t.Mode=r}(j||(j={}));var W=j,J={L:W.QrCode.Ecc.LOW,M:W.QrCode.Ecc.MEDIUM,Q:W.QrCode.Ecc.QUARTILE,H:W.QrCode.Ecc.HIGH},Z=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();function ee(e){return e in J}function te(e,t){void 0===t&&(t=0);var r=[];return e.forEach((function(e,n){var a=null;e.forEach((function(o,i){if(!o&&null!==a)return r.push("M".concat(a+t," ").concat(n+t,"h").concat(i-a,"v1H").concat(a+t,"z")),void(a=null);if(i!==e.length-1)o&&null===a&&(a=i);else{if(!o)return;null===a?r.push("M".concat(i+t,",").concat(n+t," h1v1H").concat(i+t,"z")):r.push("M".concat(a+t,",").concat(n+t," h").concat(i+1-a,"v1H").concat(a+t,"z"))}}))})),r.join("")}var re={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:"H",validator:function(e){return ee(e)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0}},ne=q(q({},re),{renderAs:{type:String,required:!1,default:"canvas",validator:function(e){return["canvas","svg"].indexOf(e)>-1}}}),ae=e({name:"QRCodeSvg",props:re,setup:function(e){var t=a(0),r=a(""),n=function(){var n=e.value,a=e.level,o=e.margin,i=W.QrCode.encodeText(n,J[a]).getModules();t.value=i.length+2*o,r.value=te(i,o)};return n(),o(n),function(){return i("svg",{width:e.size,height:e.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(t.value," ").concat(t.value)},[i("path",{fill:e.background,d:"M0,0 h".concat(t.value,"v").concat(t.value,"H0z")}),i("path",{fill:e.foreground,d:r.value})])}}}),oe=e({name:"QRCodeCanvas",props:re,setup:function(e){var t=a(null),r=function(){var r=e.value,n=e.level,a=e.size,o=e.margin,i=e.background,s=e.foreground,l=t.value;if(l){var u=l.getContext("2d");if(u){var c=W.QrCode.encodeText(r,J[n]).getModules(),h=c.length+2*o,d=window.devicePixelRatio||1,f=a/h*d;l.height=l.width=a*d,u.scale(f,f),u.fillStyle=i,u.fillRect(0,0,h,h),u.fillStyle=s,Z?u.fill(new Path2D(te(c,o))):c.forEach((function(e,t){e.forEach((function(e,r){e&&u.fillRect(r+o,t+o,1,1)}))}))}}};return s(r),o(r),function(){return i("canvas",{ref:t,style:{width:"".concat(e.size,"px"),height:"".concat(e.size,"px")}})}}}),ie=e({name:"Qrcode",render:function(){var e=this.$props,t=e.renderAs,r=e.value,n=e.size,a=e.margin,o=e.level,s=e.background,l=e.foreground,u=n>>>0,c=a>>>0,h=ee(o)?o:"H";return i("svg"===t?ae:oe,{value:r,size:u,margin:c,level:h,background:s,foreground:l})},props:ne});const se={class:"login"},le=(e=>(A("data-v-cfb6e9be"),e=e(),N(),e))((()=>n("div",{class:"title"},[n("img",{src:"/images/logo/favicon.png",alt:"logo"}),n("span",null,"登录云音乐")],-1))),ue={class:"tip"},ce=l({__name:"LoginView",setup(e){const o=u(),i=c(),l=h(),A=d(),{numberRule:N,mobileRule:F}=z(),U=a(null),$=a("请打开云音乐 APP 扫码登录"),V=a(null),j=a({phone:null,captcha:null}),K={phone:F,captcha:N},X=a(null),G=a("获取验证码"),q=a(!1),W=a(null),J=a(null),Z=()=>{p().then((e=>{e.data.profile&&window.localStorage.getItem("cookie")?($message.info("已登录，请勿重复登录"),i.userLogin=!0,o.go(-1)):(i.userLogOut(),clearInterval(W.value),w().then((e=>{200==e.code?(U.value=`https://music.163.com/login?codekey=${e.data.unikey}`,ee(e.data.unikey)):$message.error("登录二维码生成失败")})))}))},ee=e=>{W.value=setInterval((()=>{if(!e)return!1;E(e).then((e=>{var t;800==e.code?(Z(),J.value=null,$.value="当前二维码已失效，请重新扫码"):801==e.code?(J.value=null,$.value="请打开云音乐 APP 扫码登录"):802==e.code?($.value="扫描成功，请在客户端确认登录",J.value||(J.value=$message.loading("扫描成功，请在客户端确认登录",{duration:0}))):803==e.code&&(J.value.destroy(),(t=e).cookie=t.cookie.replaceAll(" HTTPOnly",""),i.setCookie(t.cookie),p().then((e=>{e.data.profile?(i.setUserData(e.data.profile),i.userLogin=!0,$.value="登录成功",$message.success("登录成功"),$signIn&&$signIn(),clearInterval(W.value),o.go(-1)):(i.userLogOut(),$message.error("登录出错，请重试"),Z())})))}))}),1e3)},te=e=>{var t;e.preventDefault(),null==(t=V.value)||t.validate((e=>{e?($loadingBar.error(),$message.error("请检查您的输入")):P(j._value.phone,j._value.captcha).then((e=>{200==e.code&&I(j._value.phone,j._value.captcha).then((e=>{}))}))}))},re=e=>{"qr"==e?Z():clearInterval(W.value)};return s((()=>{$setSiteTitle("登录"),l.setPlayBarState(!1),Z()})),f((()=>{l.setPlayBarState(!0),clearInterval(W.value),clearInterval(X.value)})),(e,a)=>{const o=D,i=S,s=L,l=x,u=v,c=b,h=T,d=B,f=k,p=H,w=O;return t(),r("div",se,[le,g(w,{animated:"",class:"content",type:"segment","justify-content":"space-evenly","pane-style":{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"30px"},"onUpdate:value":re},{default:m((()=>[g(s,{name:"qr",tab:"二维码登录"},{default:m((()=>[g(i,{class:"qr-img"},{default:m((()=>[M(U)?(t(),y(ie,{key:1,class:"qr",value:M(U),size:180,level:"H",background:"#00000000",foreground:M(A).themeData.primaryColor},null,8,["value","foreground"])):(t(),y(o,{key:0,style:{"min-width":"180px"},height:"180px",width:"180px"}))])),_:1}),n("span",ue,C(M($)),1)])),_:1}),g(s,{name:"phone",tab:"手机号登录"},{default:m((()=>[g(l,{style:{width:"100%","margin-top":"-20px","margin-bottom":"12px"},type:"warning"},{default:m((()=>[R(" 该登录方式暂时无法使用 ")])),_:1}),g(p,{class:"phone",ref_key:"phoneFormRef",ref:V,model:M(j),rules:K,"show-label":!1},{default:m((()=>[g(h,{path:"phone"},{default:m((()=>[g(c,{placeholder:"请输入手机号",value:M(j).phone,"onUpdate:value":a[0]||(a[0]=e=>M(j).phone=e)},{prefix:m((()=>[g(u,{component:M(Y)},null,8,["component"])])),_:1},8,["value"])])),_:1}),g(h,{path:"captcha"},{default:m((()=>[g(d,{style:{width:"100%"},placeholder:"请输入短信验证码",value:M(j).captcha,"onUpdate:value":a[1]||(a[1]=e=>M(j).captcha=e),"show-button":!1},{prefix:m((()=>[g(u,{component:M(Q)},null,8,["component"])])),_:1},8,["value"]),g(f,{type:"primary",style:{"margin-left":"12px"},disabled:M(q),onClick:a[2]||(a[2]=e=>{return t=M(j).phone,clearInterval(X.value),void(null==(r=V.value)||r.validate((e=>{e?$message.error("请输入正确的手机号"):_(t).then((e=>{if(200==e.code){$message.success("验证码发送成功");let e=60;q.value=!0,X.value=setInterval((()=>{e--,G.value=e+"s",0===e&&(clearInterval(X.value),G.value="重新获取",q.value=!1)}),1e3)}else $message.error("验证码发送失败，请重试")}))}),(e=>"phone"===(null==e?void 0:e.key))));var t,r})},{default:m((()=>[R(C(M(G)),1)])),_:1},8,["disabled"])])),_:1}),g(h,null,{default:m((()=>[g(f,{style:{width:"100%"},type:"primary",onClick:te},{default:m((()=>[R(" 登录 ")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),g(s,{name:"email",tab:"邮箱登录"},{default:m((()=>[R(" 还没搞 ")])),_:1})])),_:1})])}}},[["__scopeId","data-v-cfb6e9be"]]);export{ce as default};
