import{P as e,r as a,z as u,j as s,M as t,N as r,U as l,Q as o,R as n,S as m,bC as v,bD as i}from"./index.2d658157.js";import{D as p}from"./DataLists.3ba2b8b8.js";import{P as g}from"./index.fe593983.js";import"./SmallSongData.9d069edf.js";import"./InputNumber.6e3256f5.js";import"./Add.4fe37192.js";import"./FormItem.8e86c8fa.js";import"./PlayOne.a9053696.js";import"./Select.bcceca04.js";const c={class:"songs"},d={__name:"songs",setup(d){const b=e(),f=a(b.currentRoute.value.query.keywords),y=a([]),h=a(0),j=a(30),C=a(b.currentRoute.value.query.page?Number(b.currentRoute.value.query.page):1),q=(e,a=30,u=0,s=1)=>{v(e,a,u,s).then((e=>{e.result.songs?(h.value=e.result.songCount,y.value=[],e.result.songs.forEach(((e,a)=>{y.value.push({id:e.id,num:a+1+(C.value-1)*j.value,name:e.name,artist:e.ar,album:e.al,alia:e.alia,time:i(e.dt),fee:e.fee,pc:e.pc?e.pc:null,mv:e.mv?e.mv:null})}))):$message.error("搜索内容为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))};u((()=>b.currentRoute.value),(e=>{f.value=e.query.keywords,C.value=Number(e.query.page?e.query.page:1),"s-songs"==e.name&&q(f.value,j.value,C.value?(C.value-1)*j.value:0)}));const N=e=>{j.value=e,q(f.value,e,(C.value-1)*j.value)},D=e=>{b.push({path:"/search/songs",query:{keywords:f.value,page:e}})};return s((()=>{q(f.value,j.value,(C.value-1)*j.value)})),(e,a)=>(t(),r("div",c,[l(p,{listData:o(y)},null,8,["listData"]),o(y)[0]?(t(),n(g,{key:0,pageNumber:o(C),totalCount:o(h),onPageSizeChange:N,onPageNumberChange:D},null,8,["pageNumber","totalCount"])):m("",!0)]))}};export{d as default};
