import{P as e,r as a,z as u,j as s,M as r,N as t,U as l,Q as o,R as m,S as i,bC as n,a3 as p}from"./index.2d658157.js";import{C as v}from"./CoverLists.f24448be.js";import{P as c}from"./index.fe593983.js";import"./album.095eb62c.js";import"./formRules.1ad773f3.js";import"./FormItem.8e86c8fa.js";import"./Select.bcceca04.js";import"./PlayOne.a9053696.js";import"./Grid.cc39c44f.js";import"./Skeleton.2e7bf840.js";import"./use-houdini.7148f755.js";const b={class:"albums"},d={__name:"albums",setup(d){const f=e(),y=a(f.currentRoute.value.query.keywords),g=a([]),h=a(0),j=a(30),C=a(f.currentRoute.value.query.page?Number(f.currentRoute.value.query.page):1),q=(e,a=30,u=0,s=10)=>{n(e,a,u,s).then((e=>{h.value=e.result.albumCount,g.value=[],e.result.albums?e.result.albums.forEach((e=>{g.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:p(e.publishTime)})})):$message.error("搜索内容为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))};u((()=>f.currentRoute.value),(e=>{y.value=e.query.keywords,C.value=Number(e.query.page?e.query.page:1),"s-albums"==e.name&&q(y.value,j.value,(C.value-1)*j.value)}));const N=e=>{j.value=e,q(y.value,e,(C.value-1)*j.value)},R=e=>{f.push({path:"/search/albums",query:{keywords:y.value,page:e}})};return s((()=>{q(y.value,j.value,(C.value-1)*j.value)})),(e,a)=>(r(),t("div",b,[l(v,{listData:o(g),listType:"album"},null,8,["listData"]),o(g)[0]?(r(),m(c,{key:0,pageNumber:o(C),totalCount:o(h),onPageSizeChange:N,onPageNumberChange:R},null,8,["pageNumber","totalCount"])):i("",!0)]))}};export{d as default};
