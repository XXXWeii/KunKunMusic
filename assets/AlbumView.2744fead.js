import{_ as a}from"./album.4277e4bb.js";import{a as s}from"./album.095eb62c.js";import{_ as e,P as l,r as t,j as i,z as r,Q as n,M as c,N as u,O as o,U as d,a9 as m,R as p,W as v,S as b,at as f,X as h,Y as g,$ as y,bD as k,aA as j,aw as _,ay as w,a3 as x,a7 as D,a8 as I,aE as S,ch as T,bn as A}from"./index.2d658157.js";import{D as U}from"./DataLists.3ba2b8b8.js";import{_ as $}from"./Skeleton.2e7bf840.js";import"./SmallSongData.9d069edf.js";import"./InputNumber.6e3256f5.js";import"./Add.4fe37192.js";import"./FormItem.8e86c8fa.js";import"./PlayOne.a9053696.js";import"./use-houdini.7148f755.js";const C=a=>(D("data-v-e183abfe"),a=a(),I(),a),L={key:0,class:"playlist"},M={class:"left"},R={class:"cover"},q=C((()=>o("img",{src:a,class:"album",alt:"album"},null,-1))),E={class:"intr"},H=C((()=>o("span",{class:"name"},"歌单简介",-1))),N={class:"desc text-hidden"},O={key:0,class:"tag"},P={class:"right"},z={class:"meta"},F={class:"name"},Q={class:"time"},V={class:"createTime"},W=C((()=>o("span",{class:"num"},"发行时间：",-1))),X={key:0,class:"company"},Y=C((()=>o("span",{class:"num"},"发行公司：",-1))),B={key:1,class:"title"},G=C((()=>o("span",{class:"key"},"参数不完整",-1))),J=C((()=>o("br",null,null,-1))),K={key:2,class:"loading"},Z={class:"left"},aa={class:"right"},sa=e({__name:"AlbumView",setup(a){const e=l(),D=t(e.currentRoute.value.query.id),I=t(null),C=t([]),sa=t(!1),ea=a=>{s(a).then((s=>{I.value=s.album,$setSiteTitle(s.album.name+" - 专辑"),s.songs?(C.value=[],s.songs.forEach(((s,e)=>{C.value.push({id:s.id,num:e+1,name:s.name,artist:s.ar,album:s.al,alia:s.alia,time:k(s.dt),fee:s.fee,sourceId:a,pc:s.pc?s.pc:null,mv:s.mv?s.mv:null})}))):$message.error("获取专辑歌曲失败")}))};return i((()=>{D.value&&ea(D.value)})),r((()=>e.currentRoute.value),(a=>{D.value=a.query.id,"album"==a.name&&ea(D.value)})),(a,s)=>{var l;const t=j,i=_,r=S,k=T,ea=w,la=A,ta=$;return n(I)?(c(),u("div",L,[o("div",M,[o("div",R,[d(t,{class:"coverImg",src:n(I).picUrl?n(I).picUrl.replace(/^http:/,"https:")+"?param=1024y1024":null,"fallback-src":"/images/pic/default.png"},null,8,["src"]),q]),o("div",E,[H,o("span",N,m(n(I).description),1),(null==(l=n(I))?void 0:l.description.length)>70?(c(),p(i,{key:0,block:"",strong:"",secondary:"",onClick:s[0]||(s[0]=a=>sa.value=!0)},{default:v((()=>[y(" 全部简介 ")])),_:1})):b("",!0),d(ea,{class:"s-modal",show:n(sa),"onUpdate:show":s[1]||(s[1]=a=>f(sa)?sa.value=a:null),preset:"card",title:"歌单简介",bordered:!1},{default:v((()=>[d(k,null,{default:v((()=>[d(r,{innerHTML:n(I).description.replace(/\n/g,"<br>")},null,8,["innerHTML"])])),_:1})])),_:1},8,["show"])]),n(I).tags?(c(),u("div",O,[(c(!0),u(h,null,g(n(I).tags,(a=>(c(),p(la,{class:"tags",round:"",bordered:!1,key:a},{default:v((()=>[y(m(a),1)])),_:2},1024)))),128))])):b("",!0)]),o("div",P,[o("div",z,[o("span",F,m(n(I).name),1),o("span",{class:"creator",onClick:s[2]||(s[2]=a=>n(e).push(`/artist/songs?id=${n(I).artist.id}`))},m(n(I).artist.name),1),o("div",Q,[o("div",V,[W,y(" "+m(n(x)(n(I).publishTime)),1)]),n(I).company?(c(),u("div",X,[Y,y(" "+m(n(I).company),1)])):b("",!0)])]),d(U,{listData:n(C),hideAlbum:""},null,8,["listData"])])])):n(D)?(c(),u("div",K,[o("div",Z,[d(ta,{class:"pic"}),d(ta,{text:"",repeat:5}),d(ta,{text:"",style:{width:"60%"}})]),o("div",aa,[d(ta,{sharp:!1,height:"80px",width:"60%"}),d(ta,{height:"100%",width:"100%"})])])):(c(),u("div",B,[G,J,d(i,{strong:"",secondary:"",onClick:s[3]||(s[3]=a=>n(e).go(-1)),style:{"margin-top":"20px"}},{default:v((()=>[y(" 返回上一级 ")])),_:1})]))}}},[["__scopeId","data-v-e183abfe"]]);export{sa as default};
