import{b as a}from"./album.095eb62c.js";import{_ as e,P as u,r as l,z as t,j as r,M as s,N as o,U as n,W as i,Q as m,R as v,S as p,a3 as b,ax as c,X as d,Y as y,$ as f,a9 as g,a7 as h,a8 as j,O as q,bn as C}from"./index.2d658157.js";import{C as R}from"./CoverLists.f24448be.js";import{P as w}from"./index.fe593983.js";import"./formRules.1ad773f3.js";import"./FormItem.8e86c8fa.js";import"./Select.bcceca04.js";import"./PlayOne.a9053696.js";import"./Grid.cc39c44f.js";import"./Skeleton.2e7bf840.js";import"./use-houdini.7148f755.js";const L={class:"new-album"},N=(a=>(h("data-v-0b4ae858"),a=a(),j(),a))((()=>q("div",{class:"title"},[q("span",{class:"key"},"全部新碟")],-1))),_=e({__name:"NewAlbumView",setup(e){const h=u(),j=l([]),q=l(0),_=l(30),k=l(h.currentRoute.value.query.page?Number(h.currentRoute.value.query.page):1),P=l(h.currentRoute.value.query.area?h.currentRoute.value.query.area:"ALL"),A=[{label:"全部",value:"ALL"},{label:"华语",value:"ZH"},{label:"欧美",value:"EA"},{label:"韩国",value:"KR"},{label:"日本",value:"JP"}],S=(e,u=30,l=0)=>{a(e,u,l).then((a=>{q.value=a.total,j.value=[],a.albums?a.albums.forEach((a=>{j.value.push({id:a.id,cover:a.picUrl,name:a.name,artist:a.artists,time:b(a.publishTime)})})):$message.error("全部新碟为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))};t((()=>h.currentRoute.value),(a=>{P.value=a.query.area?a.query.area:"ALL",k.value=Number(a.query.page?a.query.page:1),"new-album"==a.name&&S(P.value,_.value,(k.value-1)*_.value)}));const $=a=>{_.value=a,S(P.value,a,(k.value-1)*_.value)},x=a=>{h.push({path:"/new-album",query:{area:P.value,page:a}})};return r((()=>{$setSiteTitle("全部新碟"),S(P.value,_.value,(k.value-1)*_.value)})),(a,e)=>{const u=C,l=c;return s(),o("div",L,[N,n(l,{class:"category"},{default:i((()=>[(s(),o(d,null,y(A,(a=>n(u,{class:"tag",round:"",key:a,bordered:!1,type:a.value==m(P)?"primary":"default",onClick:e=>{return u=a.value,void h.push({path:"/new-album",query:{area:u,page:1}});var u}},{default:i((()=>[f(g(a.label),1)])),_:2},1032,["type","onClick"]))),64))])),_:1}),n(R,{listData:m(j),listType:"album"},null,8,["listData"]),m(j)[0]?(s(),v(w,{key:0,pageNumber:m(k),totalCount:m(q),onPageSizeChange:$,onPageNumberChange:x},null,8,["pageNumber","totalCount"])):p("",!0)])}}},[["__scopeId","data-v-0b4ae858"]]);export{_ as default};
