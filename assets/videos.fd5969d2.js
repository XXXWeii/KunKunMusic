import{P as e,r as a,z as u,j as s,M as t,N as r,U as o,Q as l,R as n,S as i,bC as v,a1 as m,bD as p}from"./index.2d658157.js";import{V as c}from"./VideoLists.edba3398.js";import{P as d}from"./index.fe593983.js";import"./PlayOne.a9053696.js";import"./Grid.cc39c44f.js";import"./Skeleton.2e7bf840.js";import"./use-houdini.7148f755.js";import"./Select.bcceca04.js";const y={class:"videos"},g={__name:"videos",setup(g){const b=e(),h=a(b.currentRoute.value.query.keywords),C=a([]),f=a(0),j=a(30),q=a(b.currentRoute.value.query.page?Number(b.currentRoute.value.query.page):1),N=(e,a=30,u=0,s=1004)=>{v(e,a,u,s).then((e=>{f.value=e.result.mvCount,C.value=[],e.result.mvs?e.result.mvs.forEach((e=>{C.value.push({id:e.id,cover:e.cover,name:e.name,artist:e.artists,playCount:m(e.playCount),duration:p(e.duration)})})):$message.error("搜索内容为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))};u((()=>b.currentRoute.value),(e=>{h.value=e.query.keywords,q.value=Number(e.query.page?e.query.page:1),"s-videos"==e.name&&N(h.value,j.value,(q.value-1)*j.value)}));const k=e=>{j.value=e,N(h.value,e,(q.value-1)*j.value)},P=e=>{b.push({path:"/search/videos",query:{keywords:h.value,page:e}})};return s((()=>{N(h.value,j.value,(q.value-1)*j.value)})),(e,a)=>(t(),r("div",y,[o(c,{listData:l(C)},null,8,["listData"]),l(C)[0]?(t(),n(d,{key:0,pageNumber:l(q),totalCount:l(f),onPageSizeChange:k,onPageNumberChange:P},null,8,["pageNumber","totalCount"])):i("",!0)]))}};export{g as default};
