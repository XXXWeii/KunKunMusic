import{n as e,l as r,q as o,m as a,cc as l,cd as n,d as t,e as s,bG as i,B as d,p as c,w as u,g as v,D as p,h as m,b as h,ce as b,i as g,a as f,M as y,N as x,O as C,_ as w,P as _,a4 as k,r as z,z as q,j as R,af as $,U as j,W as L,Q as P,at as D,R as S,S as B,cf as I,a1 as M,cg as E,aw as N,ax as O,ay as T,$ as U,a9 as H,I as V,X as F,Y as G,bn as Y,aE as Q,ch as W}from"./index.2d658157.js";import{C as X}from"./CoverLists.f24448be.js";import{P as A}from"./index.fe593983.js";import{_ as J}from"./Switch.421441e9.js";import"./album.095eb62c.js";import"./formRules.1ad773f3.js";import"./FormItem.8e86c8fa.js";import"./Select.bcceca04.js";import"./PlayOne.a9053696.js";import"./Grid.cc39c44f.js";import"./Skeleton.2e7bf840.js";import"./use-houdini.7148f755.js";const K=e([r("list","\n --n-merged-border-color: var(--n-border-color);\n --n-merged-color: var(--n-color);\n --n-merged-color-hover: var(--n-color-hover);\n margin: 0;\n font-size: var(--n-font-size);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n padding: 0;\n list-style-type: none;\n color: var(--n-text-color);\n background-color: var(--n-merged-color);\n ",[o("show-divider",[r("list-item",[e("&:not(:last-child)",[a("divider","\n background-color: var(--n-merged-border-color);\n ")])])]),o("clickable",[r("list-item","\n cursor: pointer;\n ")]),o("bordered","\n border: 1px solid var(--n-merged-border-color);\n border-radius: var(--n-border-radius);\n "),o("hoverable",[r("list-item","\n border-radius: var(--n-border-radius);\n ",[e("&:hover","\n background-color: var(--n-merged-color-hover);\n ",[a("divider","\n background-color: transparent;\n ")])])]),o("bordered, hoverable",[r("list-item","\n padding: 12px 20px;\n "),a("header, footer","\n padding: 12px 20px;\n ")]),a("header, footer","\n padding: 12px 0;\n box-sizing: border-box;\n transition: border-color .3s var(--n-bezier);\n ",[e("&:not(:last-child)","\n border-bottom: 1px solid var(--n-merged-border-color);\n ")]),r("list-item","\n position: relative;\n padding: 12px 0; \n box-sizing: border-box;\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n transition:\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[a("prefix","\n margin-right: 20px;\n flex: 0;\n "),a("suffix","\n margin-left: 20px;\n flex: 0;\n "),a("main","\n flex: 1;\n "),a("divider","\n height: 1px;\n position: absolute;\n bottom: 0;\n left: 0;\n right: 0;\n background-color: transparent;\n transition: background-color .3s var(--n-bezier);\n pointer-events: none;\n ")])]),l(r("list","\n --n-merged-color-hover: var(--n-color-hover-modal);\n --n-merged-color: var(--n-color-modal);\n --n-merged-border-color: var(--n-border-color-modal);\n ")),n(r("list","\n --n-merged-color-hover: var(--n-color-hover-popover);\n --n-merged-color: var(--n-color-popover);\n --n-merged-border-color: var(--n-border-color-popover);\n "))]),Z=Object.assign(Object.assign({},d.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),ee=h("n-list"),re=t({name:"List",props:Z,setup(e){const{mergedClsPrefixRef:r,inlineThemeDisabled:o,mergedRtlRef:a}=s(e),l=i("List",a,r),n=d("List","-list",K,b,e,r);c(ee,{showDividerRef:u(e,"showDivider"),mergedClsPrefixRef:r});const t=v((()=>{const{common:{cubicBezierEaseInOut:e},self:{fontSize:r,textColor:o,color:a,colorModal:l,colorPopover:t,borderColor:s,borderColorModal:i,borderColorPopover:d,borderRadius:c,colorHover:u,colorHoverModal:v,colorHoverPopover:p}}=n.value;return{"--n-font-size":r,"--n-bezier":e,"--n-text-color":o,"--n-color":a,"--n-border-radius":c,"--n-border-color":s,"--n-border-color-modal":i,"--n-border-color-popover":d,"--n-color-modal":l,"--n-color-popover":t,"--n-color-hover":u,"--n-color-hover-modal":v,"--n-color-hover-popover":p}})),m=o?p("list",void 0,t,e):void 0;return{mergedClsPrefix:r,rtlEnabled:l,cssVars:o?void 0:t,themeClass:null==m?void 0:m.themeClass,onRender:null==m?void 0:m.onRender}},render(){var e;const{$slots:r,mergedClsPrefix:o,onRender:a}=this;return null==a||a(),m("ul",{class:[`${o}-list`,this.rtlEnabled&&`${o}-list--rtl`,this.bordered&&`${o}-list--bordered`,this.showDivider&&`${o}-list--show-divider`,this.hoverable&&`${o}-list--hoverable`,this.clickable&&`${o}-list--clickable`,this.themeClass],style:this.cssVars},r.header?m("div",{class:`${o}-list__header`},r.header()):null,null===(e=r.default)||void 0===e?void 0:e.call(r),r.footer?m("div",{class:`${o}-list__footer`},r.footer()):null)}}),oe=t({name:"ListItem",setup(){const e=g(ee,null);return e||f("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:e.showDividerRef,mergedClsPrefix:e.mergedClsPrefixRef}},render(){const{$slots:e,mergedClsPrefix:r}=this;return m("li",{class:`${r}-list-item`},e.prefix?m("div",{class:`${r}-list-item__prefix`},e.prefix()):null,e.default?m("div",{class:`${r}-list-item__main`},e):null,e.suffix?m("div",{class:`${r}-list-item__suffix`},e.suffix()):null,this.showDivider&&m("div",{class:`${r}-list-item__divider`}))}}),ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},le=[C("path",{d:"M9.29 6.71a.996.996 0 0 0 0 1.41L13.17 12l-3.88 3.88a.996.996 0 1 0 1.41 1.41l4.59-4.59a.996.996 0 0 0 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z",fill:"currentColor"},null,-1)],ne=t({name:"ChevronRightRound",render:function(e,r){return y(),x("svg",ae,le)}}),te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},se=[C("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87c2.08-1.93 2.84-5.01 1.72-7.69zm-9.28 5.03c1.44-.35 2.18-1.39 2.38-2.31c.33-1.43-.96-2.83-.09-5.09c.33 1.87 3.27 3.04 3.27 5.08c.08 2.53-2.66 4.7-5.56 2.32z",fill:"currentColor"},null,-1),C("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87c2.08-1.93 2.84-5.01 1.72-7.69zm-9.28 5.03c1.44-.35 2.18-1.39 2.38-2.31c.33-1.43-.96-2.83-.09-5.09c.33 1.87 3.27 3.04 3.27 5.08c.08 2.53-2.66 4.7-5.56 2.32z",fill:"currentColor"},null,-1)],ie=t({name:"LocalFireDepartmentRound",render:function(e,r){return y(),x("svg",te,se)}}),de={class:"playlists"},ce={class:"menu"},ue={key:0,class:"all-cat"},ve={key:1,class:"error"},pe=w({__name:"playlists",setup(e){const r=_(),o=k(),a=z(!1),l=z(r.currentRoute.value.query.cat?r.currentRoute.value.query.cat:"全部歌单"),n=z([]),t=z(0),s=z(30),i=z(r.currentRoute.value.query.page?Number(r.currentRoute.value.query.page):1),d=z(!!r.currentRoute.value.query.hq&&"true"==r.currentRoute.value.query.hq),c=z(!0),u=z(!1),v=e=>{n.value=[],r.push({path:"/discover/playlists",query:{cat:l.value,hq:!!e,page:1}})},p=(e="全部歌单",r=30,o=0)=>{I(e,r,o).then((e=>{t.value=e.total,n.value=[],e.playlists[0]?e.playlists.forEach((e=>{n.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:M(e.playCount)})})):$message.error("歌单列表为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))},m=(e="全部歌单",r=30)=>{const o=n.value[0]?n.value[n.value.length-1].updateTime:null;E(e,r,o).then((e=>{e.playlists[0]?(e.more?c.value=!0:c.value=!1,u.value=!1,e.playlists.forEach((e=>{n.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:M(e.playCount),updateTime:e.updateTime})}))):(c.value=!1,$message.error("精品歌单列表为空"))}))},h=e=>{n.value=[],r.push({path:"/discover/playlists",query:{cat:e,page:1}}),a.value=!1},b=e=>{s.value=e,p(l.value,e,(i.value-1)*s.value)},g=e=>{r.push({path:"/discover/playlists",query:{cat:l.value,page:e}})};return q((()=>r.currentRoute.value),(e=>{l.value=e.query.cat?e.query.cat:"全部歌单",d.value=!!e.query.hq&&"true"==e.query.hq,"dsc-playlists"==e.name&&(d.value?m(l.value):(i.value=e.query.page?Number(e.query.page):1,p(l.value,s.value,(i.value-1)*s.value)))})),R((()=>{$setSiteTitle("发现 - 歌单"),o.catList.sub&&o.highqualityCatList[0]||o.setCatList(!0),d.value?m(l.value):p(l.value,s.value,(i.value-1)*s.value)})),(e,r)=>{const s=$,p=N,f=Y,w=Q,_=O,k=oe,z=re,q=W,R=T,I=J;return y(),x("div",de,[C("div",ce,[j(p,{strong:"",secondary:"",class:"cat","icon-placement":"right",round:"",onClick:r[0]||(r[0]=e=>a.value=!0)},{icon:L((()=>[j(s,{class:"up",component:P(ne)},null,8,["component"])])),default:L((()=>[U(" "+H(P(l)),1)])),_:1}),j(R,{class:"s-modal",show:P(a),"onUpdate:show":r[2]||(r[2]=e=>D(a)?a.value=e:null),preset:"card",title:"歌单分类",bordered:!1},{header:L((()=>[U(" 歌单分类 "),j(f,{round:"",class:"tag",type:"全部歌单"==P(l)?"primary":"default",style:V({marginLeft:"12px",fontSize:"12px",transform:"translateY(-2px)",cursor:"pointer"}),bordered:!1,onClick:r[1]||(r[1]=e=>h("全部歌单"))},{default:L((()=>[U(" 全部歌单 ")])),_:1},8,["type","style"])])),default:L((()=>[j(q,null,{default:L((()=>{var e;return[(null==(e=P(o).catList)?void 0:e.sub[0])?(y(),x("div",ue,[j(z,null,{default:L((()=>[(y(!0),x(F,null,G(P(o).catList.categories,((e,r)=>(y(),S(k,{key:e},{prefix:L((()=>[j(w,{class:"type"},{default:L((()=>[U(H(e),1)])),_:2},1024)])),default:L((()=>[j(_,null,{default:L((()=>[(y(!0),x(F,null,G(P(o).catList.sub.filter((e=>e.category==r)),(e=>(y(),S(f,{round:"",class:"tag",size:"large",key:e,bordered:!1,type:e.name==P(l)?"primary":"default",onClick:r=>h(e.name)},{icon:L((()=>[e.hot?(y(),S(s,{key:0,class:"icon",component:P(ie)},null,8,["component"])):B("",!0)])),default:L((()=>[U(H(e.name)+" ",1)])),_:2},1032,["type","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):(y(),x("div",ve,"分类数据获取失败"))]})),_:1})])),_:1},8,["show"]),(M=P(o).highqualityCatList,E=P(l),"全部歌单"==E||M.some((e=>e.name==E))?(y(),S(_,{key:0,align:"center"},{default:L((()=>[j(w,null,{default:L((()=>[U("精品歌单")])),_:1}),j(I,{value:P(d),"onUpdate:value":[r[3]||(r[3]=e=>D(d)?d.value=e:null),v],round:!1},null,8,["value"])])),_:1})):B("",!0))]),j(X,{listData:P(n)},null,8,["listData"]),P(n)[0]&&!P(d)?(y(),S(A,{key:0,totalCount:P(t),pageNumber:P(i),onPageSizeChange:b,onPageNumberChange:g},null,8,["totalCount","pageNumber"])):B("",!0),j(_,{justify:"center"},{default:L((()=>[P(d)&&P(c)?(y(),S(p,{key:0,class:"more",size:"large",strong:"",secondary:"",round:"",loading:P(u),onClick:r[4]||(r[4]=()=>{u.value=!0,m(P(l))})},{default:L((()=>[U(" 加载更多 ")])),_:1},8,["loading"])):B("",!0)])),_:1})]);var M,E}}},[["__scopeId","data-v-caaf34eb"]]);export{pe as default};
