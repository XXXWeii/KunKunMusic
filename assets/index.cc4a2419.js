import{as as e,U as t,aD as s,_ as a,a5 as o,P as i,M as n,R as l,W as r,O as c,N as m,S as d,$ as u,a9 as k,Q as p,cs as h,bL as v,a1 as C,T as D,aE as f,af as g,bK as L}from"./index.2d658157.js";import{_ as j}from"./Skeleton.2e7bf840.js";const w=e("local",!1,(function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M9.85786 32.7574C6.23858 33.8432 4 35.3432 4 37C4 40.3137 12.9543 43 24 43C35.0457 43 44 40.3137 44 37C44 35.3432 41.7614 33.8432 38.1421 32.7574",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 35C24 35 37 26.504 37 16.6818C37 9.67784 31.1797 4 24 4C16.8203 4 11 9.67784 11 16.6818C11 26.504 24 35 24 35Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 22C26.7614 22 29 19.7614 29 17C29 14.2386 26.7614 12 24 12C21.2386 12 19 14.2386 19 17C19 19.7614 21.2386 22 24 22Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])})),M=e("thumbs-up",!0,(function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M27.6002 18.5998V11.3998C27.6002 8.41743 25.1826 5.99977 22.2002 5.99977L15.0002 22.1998V41.9998H35.9162C37.7113 42.0201 39.2471 40.7147 39.5162 38.9398L42.0002 22.7398C42.1587 21.6955 41.8506 20.6343 41.1576 19.8373C40.4645 19.0403 39.4564 18.5878 38.4002 18.5998H27.6002Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M15 22.0001H10.194C8.08532 21.9628 6.2827 23.7095 6 25.7994V38.3994C6.2827 40.4894 8.08532 42.0367 10.194 41.9994H15V22.0001Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])})),b=e("time",!0,(function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24.0084 12.0001L24.0072 24.0089L32.4866 32.4883",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),y=(e,t=0,a=null,o="music")=>s({method:"GET",url:`/comment/${o}`,params:{id:e,offset:t,before:a,timestamp:(new Date).getTime()}}),_={class:"user"},R={class:"avatar"},T=["src"],H=["src"],x={key:0,class:"associator"},z=["src"],W={class:"review"},V={class:"content"},Z={key:0,class:"beReplied"},$={class:"thing"},B={class:"item"},U={key:0,class:"item"},E=a({__name:"index",props:{commentData:{type:Object,default:{}}},setup(e){const a=e,y=o(),E=i(),I=()=>{if(y.userLogin){const e=a.commentData.liked?0:1;((e,t,a,o=0)=>s({method:"GET",hiddenBar:!0,url:"/comment/like",params:{id:e,cid:t,t:a,type:o,timestamp:(new Date).getTime()}}))(E.currentRoute.value.query.id,a.commentData.commentId,e).then((t=>{200===t.code?($message.success(e?"点赞成功":"取消点赞成功"),a.commentData.liked=!a.commentData.liked,a.commentData.likedCount+=e?1:-1):$message.error("操作失败，请重试")}))}else $message.error("请登录账号后使用")};return(s,a)=>{const o=f,i=g,y=L,E=j;return n(),l(D,{mode:"out-in"},{default:r((()=>[Object.keys(e.commentData).length?(n(),l(y,{key:0,class:"comment",hoverable:""},{default:r((()=>{var s,a,l;return[c("div",_,[c("div",R,[c("img",{class:"avatarImg",src:e.commentData.user.avatarUrl.replace(/^http:/,"https:")+"?param=50y50",alt:"avatar"},null,8,T),(null==(s=e.commentData.user.vipRights)?void 0:s.redVipAnnualCount)>0?(n(),m("img",{key:0,class:"musicPackage",src:e.commentData.user.vipRights.musicPackage.iconUrl.replace(/^http:/,"https:"),alt:"redVipAnnualCount",title:"网易音乐人"},null,8,H)):d("",!0)]),(null==(a=e.commentData.user.vipRights)?void 0:a.redVipLevel)>0?(n(),m("div",x,[e.commentData.user.vipRights.associator?(n(),m("img",{key:0,src:e.commentData.user.vipRights.associator.iconUrl.replace(/^http:/,"https:"),alt:"associator",title:"黑胶会员"},null,8,z)):d("",!0)])):d("",!0)]),c("div",W,[c("div",V,[t(o,{class:"name"},{default:r((()=>[u(k(e.commentData.user.nickname)+"：",1)])),_:1}),t(o,{class:"text",innerHTML:e.commentData.content},null,8,["innerHTML"])]),e.commentData.beReplied[0]?(n(),m("div",Z,[t(o,{class:"name"},{default:r((()=>[u(" @"+k(e.commentData.beReplied[0].user.nickname)+"： ",1)])),_:1}),t(o,{class:"text"},{default:r((()=>[u(k(e.commentData.beReplied[0].content),1)])),_:1})])):d("",!0),c("div",$,[c("div",B,[t(i,{size:"14",depth:3,component:p(b)},null,8,["component"]),t(o,{depth:3,innerHTML:p(h)(e.commentData.time)},null,8,["innerHTML"])]),(null==(l=e.commentData.ipLocation)?void 0:l.location)?(n(),m("div",U,[t(i,{size:"14",depth:3,component:p(w)},null,8,["component"]),t(o,{depth:3,innerHTML:e.commentData.ipLocation.location},null,8,["innerHTML"])])):d("",!0),c("div",{class:v(e.commentData.liked?"like liked":"like"),onClick:I},[t(i,null,{default:r((()=>[t(p(M),{theme:e.commentData.liked?"filled":"outline"},null,8,["theme"])])),_:1}),u(" "+k(p(C)(e.commentData.likedCount)),1)],2)])])]})),_:1})):(n(),l(E,{key:1,class:"skeleton"}))])),_:1})}}},[["__scopeId","data-v-7b671a54"]]);export{E as C,y as g};
