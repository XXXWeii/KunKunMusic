import{d as a,M as e,N as s,O as t,_ as l,P as n,a5 as r,r as i,j as o,z as u,af as c,bz as d,Q as m,U as v,W as p,R as f,S as g,at as h,aA as w,aE as z,aw as _,ax as x,ay as b,$ as y,a9 as S,cK as k,T as C,bA as A,bB as $,a7 as L,a8 as M,ch as U}from"./index.2d658157.js";import{a as R,l as j}from"./artist.2ff9ca04.js";import{V}from"./VideocamRound.923958a0.js";import{a as T,_ as B}from"./Tabs.aeef60ff.js";import"./Add.4fe37192.js";const I={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},q=[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5s-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1s1-.45 1-1s-.45-1-1-1z",fill:"currentColor"},null,-1)],D=a({name:"AlbumFilled",render:function(a,t){return e(),s("svg",I,q)}}),P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},H=[t("circle",{cx:"9",cy:"8",r:"4",fill:"currentColor"},null,-1),t("path",{d:"M9 14c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4zm11-4V7h-2v3h-3v2h3v3h2v-3h3v-2z",fill:"currentColor"},null,-1)],N=a({name:"PersonAddAlt1Round",render:function(a,t){return e(),s("svg",P,H)}}),E={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},F=[t("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4s4-1.79 4-4zM2 18v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4s-8 1.34-8 4zm16-8h4c.55 0 1 .45 1 1s-.45 1-1 1h-4c-.55 0-1-.45-1-1s.45-1 1-1z",fill:"currentColor"},null,-1)],K=a({name:"PersonRemoveAlt1Round",render:function(a,t){return e(),s("svg",E,F)}}),O={class:"artist"},Q={key:0,class:"artistData"},W={class:"cover"},G={class:"data"},J={class:"num"},X={key:1,class:"error"},Y=(a=>(L("data-v-1cbd336a"),a=a(),M(),a))((()=>t("br",null,null,-1))),Z={key:3,class:"content"},aa=l({__name:"index",setup(a){const l=n(),L=r(),M=i(l.currentRoute.value.query.id),I=i(null),q=i(!1),P=i(!1),H=i(l.currentRoute.value.path.split("/")[2]),E=a=>{a?R(a).then((a=>{I.value={id:a.data.artist.id,name:a.data.artist.name,occupation:a.data.identify?a.data.identify.imageDesc:null,cover:a.data.artist.cover,desc:a.data.artist.briefDesc,albumSize:a.data.artist.albumSize,musicSize:a.data.artist.musicSize,mvSize:a.data.artist.mvSize},$setSiteTitle(a.data.artist.name+" - 歌手"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})})).catch((a=>{l.go(-1),console.error("歌手信息获取失败："+a),$message.error("歌手信息获取失败")})):$message.error("参数不完整")},F=a=>{l.push({path:`/artist/${a}`,query:{id:M.value,page:1}})},aa=a=>{if(L.getUserArtistLists.list[0]){return-1===L.getUserArtistLists.list.findIndex((e=>e.id===Number(a)))}return!0};return o((()=>{E(M.value),P.value=aa(M.value),!L.userLogin||L.getUserArtistLists.has||L.getUserArtistLists.isLoading||L.setUserArtistLists((()=>{P.value=aa(M.value)}))})),u((()=>l.currentRoute.value),(a=>{M.value=a.query.id,H.value=a.path.split("/")[2],P.value=aa(M.value),"artist"==a.path.split("/")[1]&&E(M.value)})),(a,n)=>{const r=w,i=z,o=c,u=_,R=x,E=U,ea=b,sa=B,ta=T,la=d("router-view");return e(),s("div",O,[m(M)&&m(I)?(e(),s("div",Q,[t("div",W,[v(r,{round:"",class:"coverImg",src:m(I).cover.replace(/^http:/,"https:")+"?param=300y300","fallback-src":"/images/pic/default.png"},null,8,["src"])]),t("div",G,[v(i,{class:"name"},{default:p((()=>[y(S(m(I).name),1)])),_:1}),v(i,{class:"occupation",depth:3},{default:p((()=>[y(S(m(I).occupation),1)])),_:1}),t("div",J,[v(i,{class:"musicSize",onClick:n[0]||(n[0]=a=>F("songs"))},{default:p((()=>[v(o,{component:m(k)},null,8,["component"]),y(" "+S(m(I).musicSize)+" 首歌 ",1)])),_:1}),v(i,{class:"albumSize",onClick:n[1]||(n[1]=a=>F("albums"))},{default:p((()=>[v(o,{component:m(D)},null,8,["component"]),y(" "+S(m(I).albumSize)+" 张专辑 ",1)])),_:1}),v(i,{class:"mvSize",onClick:n[2]||(n[2]=a=>F("videos"))},{default:p((()=>[v(o,{component:m(V)},null,8,["component"]),y(" "+S(m(I).mvSize)+" 个 MV ",1)])),_:1})]),v(i,{class:"desc text-hidden",onClick:n[3]||(n[3]=a=>q.value=!0)},{default:p((()=>[y(S(m(I).desc),1)])),_:1}),m(L).userLogin?(e(),f(R,{key:0,class:"button"},{default:p((()=>[v(u,{type:m(P)?"primary":"default",strong:"",secondary:"",onClick:n[4]||(n[4]=a=>(a=>{const e=aa(a.id)?1:2;j(e,a.id).then((s=>{200===s.code?($message.success(`${a.name}${1==e?"收藏成功":"取消收藏成功"}`),L.setUserArtistLists((()=>{P.value=aa(M.value)}))):$message.error(`${a.name}${1==e?"收藏失败":"取消收藏失败"}`)}))})(m(I)))},{icon:p((()=>[v(o,{component:m(P)?m(N):m(K)},null,8,["component"])])),default:p((()=>[y(" "+S(m(P)?"收藏歌手":"取消收藏歌手"),1)])),_:1},8,["type"])])),_:1})):g("",!0),v(ea,{class:"s-modal",show:m(q),"onUpdate:show":n[5]||(n[5]=a=>h(q)?q.value=a:null),preset:"card",title:"歌手介绍",bordered:!1},{default:p((()=>[v(E,null,{default:p((()=>[v(i,{innerHTML:m(I).desc.replace(/\n/g,"<br>")},null,8,["innerHTML"])])),_:1})])),_:1},8,["show"])])])):m(M)?g("",!0):(e(),s("div",X,[v(i,null,{default:p((()=>[y("参数不完整")])),_:1}),Y,v(u,{strong:"",secondary:"",onClick:n[6]||(n[6]=a=>m(l).go(-1)),style:{"margin-top":"20px"}},{default:p((()=>[y(" 返回上一级 ")])),_:1})])),m(I)?(e(),f(ta,{key:2,class:"main-tab",type:"segment","onUpdate:value":[F,n[7]||(n[7]=a=>h(H)?H.value=a:null)],value:m(H)},{default:p((()=>[v(sa,{name:"songs"},{default:p((()=>[y(" 热门单曲 ")])),_:1}),v(sa,{name:"albums"},{default:p((()=>[y(" 专辑 ")])),_:1}),v(sa,{name:"videos"},{default:p((()=>[y(" MV ")])),_:1})])),_:1},8,["value"])):g("",!0),m(I)?(e(),s("main",Z,[v(la,{mvSize:m(I)?m(I).mvSize:null},{default:p((({Component:a})=>[(e(),f($,null,[v(C,{name:"move",mode:"out-in"},{default:p((()=>[(e(),f(A(a)))])),_:2},1024)],1024))])),_:1},8,["mvSize"])])):g("",!0)])}}},[["__scopeId","data-v-1cbd336a"]]);export{aa as default};
