import{_ as a,P as s,a4 as e,r as l,j as t,z as n,af as i,Q as o,M as r,N as c,O as d,U as m,R as u,S as p,W as f,aa as v,bN as y,cG as g,a1 as h,aA as _,aE as b,ax as j,$ as k,a3 as T,cH as L,cI as M,cJ as C,bS as H,aw as x}from"./index.2d658157.js";import{C as P}from"./CoverLists.f24448be.js";import{V as S}from"./VideocamRound.923958a0.js";import{a as R}from"./headers.f4910964.js";import{_ as $}from"./Divider.22731e80.js";import"./album.095eb62c.js";import"./formRules.1ad773f3.js";import"./FormItem.8e86c8fa.js";import"./Select.bcceca04.js";import"./PlayOne.a9053696.js";import"./Grid.cc39c44f.js";import"./Skeleton.2e7bf840.js";import"./use-houdini.7148f755.js";const D={key:0,class:"song"},I={class:"detail"},U={class:"pic"},V={class:"right"},q={class:"intr"},w={class:"all-artist"},A={class:"album"},E={key:1,class:"time"},F={key:0,class:"simiPlayList"},G=a({__name:"SongView",setup(a){const G=s(),N=e(),O=l(null),z=l(G.currentRoute.value.query.id),J=l(null),Q=l([]),W=a=>{y(a).then((s=>{s.songs[0]?(J.value=s.songs[0],$setSiteTitle(s.songs[0].name+" - "+s.songs[0].ar[0].name+" - 单曲"),B(a)):$message.error("歌曲信息获取失败")}))},B=a=>{g(a).then((a=>{Q.value=[],a.playlists.forEach((a=>{Q.value.push({id:a.id,cover:a.coverImgUrl,name:a.name,artist:a.creator,playCount:h(a.playCount)})}))}))};return t((()=>{z.value&&W(z.value)})),n((()=>G.currentRoute.value),(a=>{z.value=a.query.id,"song"==a.name&&W(z.value)})),(a,s)=>{const e=_,l=b,t=i,n=x,y=j,g=$,h=R;return o(J)?(r(),c("div",D,[d("div",I,[d("div",U,[m(e,{class:"coverImg",src:o(J).al.picUrl?o(J).al.picUrl.replace(/^http:/,"https:")+"?param=1024y1024":"/images/pic/default.png","fallback-src":"/images/pic/default.png"},null,8,["src"])]),d("div",V,[d("div",q,[m(l,{class:"name text-hidden",innerHTML:o(J).name},null,8,["innerHTML"]),o(J).alia[0]?(r(),u(l,{key:0,depth:"3",class:"alia",innerHTML:o(J).alia[0]},null,8,["innerHTML"])):p("",!0),d("div",w,[m(l,{class:"tip",depth:"3"},{default:f((()=>[k("歌手：")])),_:1}),o(J).ar?(r(),u(v,{key:0,artistsData:o(J).ar},null,8,["artistsData"])):p("",!0)]),d("div",A,[m(l,{class:"tip",depth:"3"},{default:f((()=>[k("专辑：")])),_:1}),m(l,{class:"text",innerHTML:o(J).al.name,onClick:s[0]||(s[0]=a=>o(G).push(`/album?id=${o(J).al.id}`))},null,8,["innerHTML"])]),o(J).publishTime?(r(),c("div",E,[m(l,{class:"tip",depth:"3"},{default:f((()=>[k("发行日期：")])),_:1}),m(l,{class:"text",innerHTML:o(T)(o(J).publishTime)},null,8,["innerHTML"])])):p("",!0)]),m(y,{class:"button"},{default:f((()=>[m(n,{type:"primary",strong:"",secondary:"",onClick:s[1]||(s[1]=a=>(a=>{const s={album:a.al,artist:a.ar,fee:a.fee,id:a.id,name:a.name};N.setPersonalFmMode(!1),N.addSongToPlaylists(s)})(o(J)))},{icon:f((()=>[m(t,{component:o(L)},null,8,["component"])])),default:f((()=>[k(" 播放 ")])),_:1}),m(n,{strong:"",secondary:"",onClick:s[2]||(s[2]=a=>o(O).openAddToPlaylist(o(z)))},{icon:f((()=>[m(t,{component:o(M)},null,8,["component"])])),default:f((()=>[k(" 添加 ")])),_:1}),m(n,{strong:"",secondary:"",onClick:s[3]||(s[3]=a=>o(G).push(`/comment?id=${o(J).id}&page=1`))},{icon:f((()=>[m(t,{component:o(C)},null,8,["component"])])),default:f((()=>[k(" 评论 ")])),_:1}),o(J).mv?(r(),u(n,{key:0,strong:"",secondary:"",onClick:s[4]||(s[4]=a=>o(G).push(`/video?id=${o(J).mv}`))},{icon:f((()=>[m(t,{component:o(S)},null,8,["component"])])),default:f((()=>[k(" MV ")])),_:1})):p("",!0)])),_:1})])]),m(g),o(Q)[0]?(r(),c("div",F,[m(h,{prefix:"bar"},{default:f((()=>[k(" 包含这首歌的歌单 ")])),_:1}),m(P,{listData:o(Q)},null,8,["listData"])])):p("",!0),m(H,{ref_key:"addPlayListRef",ref:O},null,512)])):p("",!0)}}},[["__scopeId","data-v-361c0149"]]);export{G as default};
